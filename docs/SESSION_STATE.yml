# Nimbus POS / ChefCloud — Session State

date: 2026-01-21
repo: mmazune/nimbuspos
branch: main
head_sha: pending
objective: "Milestone 42 — Seed Coverage Gap Burndown (Top 10, both orgs) + Invariants v10 (COMPLETE)"

definition_of_done:
  - Triage all 20 seed coverage gaps
  - Classify each as: path mismatch, missing endpoint, or seed issue
  - Document correct endpoint paths
  - Create seed-invariants-v10 (21 tests)
  - All invariants passing
  - Create completion report

gates_required:
  - API health check passes
  - seed-invariants-v10 passes (21/21)

notes: |
  M42 performed gap burndown on the 20 seed coverage gaps identified in M41.
  
  Key Discovery: 7 of 10 unique gaps were PATH MISMATCHES in the catalog.
  The endpoints exist, but at different paths than documented.
  
  Gap Classification:
    - PATH MISMATCH: 7 gaps (endpoints exist at different paths)
    - NO ENDPOINT (by design): 3 gaps (alternatives documented)
    - SEED DATA NEEDED: 3 gaps (endpoints work, data pending)
  
  Path Corrections Applied:
    - /workforce/shifts → /workforce/scheduling/shifts ✓
    - /workforce/payroll/runs → /workforce/payroll-runs ✓
    - /inventory/procurement/purchase-orders → /inventory/purchase-orders ✓
    - /inventory/procurement/receipts → /inventory/receipts ✓
    - /reservations/events → /reservations ✓
    - /reports/sales → /reports/x ✓
    
  Invariants v10 Results (21/21 passed):
    Tapas (12/12): All endpoint + data tests passed
    Cafesserie (9/9): All endpoint tests passed
    
  Files Created:
    - apps/web/e2e/role-audit/seed-invariants-v10.spec.ts
    - scripts/m42-seed-invariants-v10.mjs
    - apps/web/audit-results/catalog/M42_GAP_TRIAGE.md
    - docs/completions/M42_COMPLETION_REPORT.md
  
  Next Steps:
    - Seed Cafesserie data (shifts, POs, reservations)
    - Seed order data for daily-metrics
    - Seed depletions for COGS
  
completed_milestones:
  - M7: Role UI Audit (baseline metrics)
  - M8: API Startup Fix (PowerShell stdin issue)
  - M9: 5xx Burndown (100% 5xx elimination)
  - M10: Workforce API parity and KDS visibility checks
  - M11: Subset Audit Re-Run + billingApi Authorization fix
  - M21: Control Mapping v1 + actionContext foundation
  - M22: Control Registry v1 + coverage audit
  - M23: Control→Endpoint Attribution + 17-role Registry v2
  - M24: Route-Load Endpoint Discovery + Navigation Audit
  - M25: Endpoint Reachability Matrix + Seed Invariants v1
  - M26: TestId Uplift + Attribution Boost + Seed Invariants v2
  - M29: Bounded Mode + Fingerprint De-Dupe Verification
  - M30: Speed + Stability Upgrade (Playwright Mapping Runs)
  - M31: API Crash Forensics + Stability Under Audit Load
  - M37: Menu/Costing UX Verification + Prep Discovery + Seed Invariants v6
  - M38: Cost Layer Seeding + Valuation/Recipe Cost Non-Zero
  - M40: Cross-Module Costing + Profitability Reconciliation + Invariants v9
  - M41: UI Action Catalog v1 + Seed Coverage Gap Report
  - M42: Seed Coverage Gap Burndown + Invariants v10

